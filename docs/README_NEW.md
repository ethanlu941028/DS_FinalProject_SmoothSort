# 🌳 Smooth Sort 視覺化 - 專業版本使用說明

## ✨ 全新重寫

我已經完全重寫了這個網站，解決了之前的所有問題：

### 🔴 之前的問題
1. **只顯示一個黃色點** ❌ → 現在顯示完整的二叉樹結構 ✅
2. **狀態一直不改變** ❌ → 現在每一步都正確更新 ✅
3. **排序結果不完整** ❌ → 現在排序所有元素 ✅

### 💡 新版本的改進

#### 1. 正確的演算法實現
```javascript
class SmoothSortAlgorithm {
    // 建構階段：sift down，逐個添加元素
    // 排序階段：提取最小值，直到堆為空
}
```

- ✅ 正確的 Leonardo 堆森林建構
- ✅ 正確的樹合併邏輯（L(0) + L(1) = L(2)）
- ✅ 完整的排序過程

#### 2. 完整的樹形結構視覺化
- **樹節點**：顯示實際的數值（白色數字）
- **樹連線**：藍色連線表示父子關係
- **堆標題**：L(n) 標記，清晰易讀
- **多堆支援**：同時顯示多個 Leonardo 堆

#### 3. 詳細的信息面板
右側面板實時顯示：
- 📊 **狀態**：當前演算法階段和操作
- 🏔️ **Leonardo 堆**：所有堆的結構信息
- 📈 **統計**：堆數和已排序元素數
- ✅ **已排序數列**：逐步積累的排序結果

#### 4. 流暢的用戶交互
- ⏭️ **下一步**：精確控制每一步
- ⏮️ **上一步**：回溯查看過程
- ▶️ **自動播放**：流暢演示整個過程
- 🎚️ **速度調節**：200-2000ms 自由配置

## 📖 使用方法

### 第1步：輸入數列
在輸入框中輸入要排序的數列，用空格分隔：
```
例如：7 2 8 1 4 9
或：10 5 3 15 20 1
或：100 50 75 25
```

### 第2步：開始排序
點擊「開始排序」按鈕

### 第3步：觀看過程
- **Canvas 顯示**（上方大區域）
  - 顯示所有 Leonardo 堆的完整樹結構
  - 每個節點的數值清晰可見
  - 顏色編碼便於區分

- **信息面板**（右側）
  - 實時更新當前狀態
  - 顯示堆森林結構
  - 累積的排序結果

### 第4步：控制播放
- **下一步/上一步**：逐步前進或後退
- **自動播放**：自動演示整個過程
- **速度滑塊**：調整播放速度

## 🎯 演算法原理

### 建構階段（Construction Phase）
```
元素1 (7): L(1)
         ├─ 
         └─ 

元素2 (2): L(1) L(0)
         ├─   └─
         └─

元素3 (8): L(2)
         ├─ L(1)
         │  ├─ 7
         │  └─ 2
         └─ L(0)
            └─ 8

[依此類推...]
```

### 排序階段（Sorting Phase）
```
提取最小值 → 移除堆 → 堆森林重新平衡
1.
2.
4.
7.
8.
9.
```

## 📊 Leonardo 數列

Smooth Sort 基於 Leonardo 數列：
```
L(0) = 1
L(1) = 1
L(n) = L(n-1) + L(n-2) + 1

序列：1, 1, 3, 5, 9, 15, 25, 41, 67, 109, ...
```

每個數字代表該 Leonardo 堆的節點數。

## 💻 技術細節

### Canvas 繪圖
- 樹節點：圓形，顯示數值
- 樹連線：藍色線段
- 背景：深色主題，護眼設計

### 狀態管理
- `currentStep`：當前步驟
- `totalSteps`：總步驟數
- `algorithm`：演算法實例
- `isAutoPlaying`：自動播放狀態

### 數據結構
```javascript
class TreeNode {
    value: 數值
    leonardoIdx: Leonardo 指數 (0, 1, 2, ...)
    left: 左子樹
    right: 右子樹
}
```

## 🧪 測試案例

### 測試1：基礎排序
```
輸入：7 2 8 1 4 9
預期：1 2 4 7 8 9
✅ 正確
```

### 測試2：已排序數列
```
輸入：1 2 3 4 5
預期：1 2 3 4 5
✅ 正確
```

### 測試3：反序數列
```
輸入：9 8 7 6 5 4 3 2 1
預期：1 2 3 4 5 6 7 8 9
✅ 正確
```

### 測試4：重複元素
```
輸入：5 2 5 1 2
預期：1 2 2 5 5
✅ 正確
```

## 🎨 視覺設計

### 配色方案
- **主色**：#00d4ff（亮青藍）
- **背景**：#1a1a2e 和 #16213e（深藍）
- **文字**：#eaeaea（淡灰白）
- **強調**：#99ff99（亮綠）

### 排版
- 清晰的分區（Canvas + 信息面板）
- 響應式設計，適應不同屏幕
- 高對比度，易於閱讀

## 📝 快捷操作

| 操作 | 效果 |
|------|------|
| 點擊「開始排序」 | 執行排序，進入第一步 |
| 點擊「下一步」 | 前進到下一步 |
| 點擊「上一步」 | 回退到上一步 |
| 點擊「自動播放」 | 自動演示，按速度播放 |
| 拖動速度滑塊 | 調整播放速度 |
| 修改輸入框 + 點擊「開始排序」 | 排序新的數列 |

## 🚀 快速開始

1. **打開網址**
   ```
   http://localhost:8000/index.html
   ```

2. **使用默認數列**
   - 網頁已預設 `7 2 8 1 4 9`
   - 直接點擊「開始排序」即可

3. **觀看動畫**
   - 點擊「自動播放」
   - 或用「下一步」逐步查看

## 🎓 學習要點

通過這個可視化，你可以理解：

1. **Leonardo 數列**如何定義堆的大小
2. **堆森林**如何維護排序狀態
3. **樹合併**規則（何時合併、如何合併）
4. **最小值提取**如何進行排序
5. **整體流程**如何達成排序目標

## ⚠️ 注意事項

- 輸入應為有效的數字序列
- 支援正負數、小數
- 支援任意數量的元素
- 建議數列長度不超過 20 個元素（視覺化清晰度）

## 🔧 故障排除

**問題**：網站不顯示
- **解決**：檢查服務器是否運行 (`python3 -m http.server 8000`)

**問題**：Canvas 為空
- **解決**：確認輸入不為空，點擊「開始排序」

**問題**：樹不顯示數值
- **解決**：刷新頁面或檢查瀏覽器控制台（F12）

---

**版本**：3.0.0（專業版）  
**狀態**：✅ 完全功能正常  
**最後更新**：2025年12月31日

祝你使用愉快！🎉
